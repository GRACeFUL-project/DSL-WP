\documentclass[]{article}
\usepackage{todonotes}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\usepackage[utf8]{inputenc}
\usepackage{color}
\usepackage[unicode=true]{hyperref}
\hypersetup{breaklinks=true,
            bookmarks=true,
            pdfauthor={Patrik Jansson et al.},
            pdftitle={GRACeFUL D4.2: A Domain Specific Language (DSL) for GRACeFUL Concept Maps},
            colorlinks=true,
            citecolor=blue,
            urlcolor=blue,
            linkcolor=magenta,
            pdfborder={0 0 0}}
\urlstyle{same}  % don't use monospace font for urls
\setlength{\parindent}{0pt}
\setlength{\parskip}{4pt plus 2pt minus 1pt}
\setlength{\emergencystretch}{3em}  % prevent overfull lines

%% Cezar
\usepackage[margin=1.60in]{geometry}
\usepackage[verbose]{wrapfig}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage{rotating}
\usepackage{lscape}
\usepackage{float}
\usepackage{geometry}
\usepackage{framed}
\usepackage{xspace}
\usepackage{acronym}
\usepackage[square,numbers]{natbib}

\definecolor{GRACeFULblue}{rgb}{0.20,0.60,0.86}

\newcommand{\grace}{GRACeFUL\xspace}
\acrodef{GCM}{\grace Concept Map}
\acrodef{GMB}{Group Model Building}
\acrodef{DSL}{Domain Specific Language}
\acrodef{CFP}{Constraint Functional Program}
\acrodef{RAT}{Rapid Assessment Tool}
\acrodef{CRUD}{Climate Resilient Urban Design}
\acrodef{CLD}{Causal Loop Diagram}
\hyphenation{GRACeFUL}

\author{}
\date{}

\begin{document}

\begin{center}
\includegraphics[width=5cm]{../coverpage/GRACeFULlogo.png}

\textcolor{GRACeFULblue}{Global systems Rapid Assessment tools\\
through Constraint FUnctional Languages}

\vspace{1cm}

FETPROACT-1-2014 Grant Nº 640954

\end{center}

\begin{framed}
\begin{center}
\Large
A Domain Specific Language (DSL) for \\
GRACeFUL Concept Maps\\[1ex]

D4.2\\[1ex]

\end{center}
\end{framed}

\vspace{1cm}

\noindent
\begin{tabular}{@{}ll@{}}
  Lead Participant:       & Chalmers (WP leader: P. Jansson)
\\Partners Contributing:  & KU Leuven, UPC
\\Dissemination Level:    & PU
\\Document Version:       & Draft (version 2017-01-26)
\\Date of Submission:     & 2017-01-31
\\Due Date of Delivery:   & 2017-01-31
\end{tabular}

\newpage

\section*{A Domain Specific Language (DSL) for\\GRACeFUL Concept Maps}\label{DSL4GRACeFUL}

Contributions by: Oskar Abrahamsson, Maximilian Algehed, Sólrún
Einarsdóttir, Alex Gerdes, and Patrik Jansson.

\vfill

\setcounter{tocdepth}{2}
\tableofcontents

\vfill

\newpage

\section*{Abstract}\label{abstract}

This second deliverable (D4.2) of work package 4 presents a Domain
Specific Language (DSL) for describing GRACeFUL concept maps.
%
This is a continuation of the initial work described in ``D4.1 Formal
Concept Maps Elements Descriptions'' delivered in project month 6.
%
The full source code of the language implementation is available on
github and installation instructions are included in this deliverable.
%
The implementation in Haskell can be seen as a formal semantics in
terms of types and functions and this means that GRACeFUL has reached
milestone M4.1 ``DSL with formal semantics v1.0 ready''.
%
In addition we include a section comparing different approaches to
modelling some of the formal semantics concepts relevant for GRACeFUL
concept maps: causal loop diagrams, qualitative probabilistic
networks, and difference equations.

\input{intro}

\input{background}

\section{GenericLibrary: a DSL for GRACeFUL Concept Maps}
\label{sec:gl}

\input{GLOverview}

\todo{Insert figure showing a graphical view?}

\input{GLExample}

% \subsection{Software infrastructure (around the DSL)}
% \label{software-infrastructure-around-the-dsl}
%
% \todo{Replace by a more current description of the software status}
%
% \todo{Should we even describe the two different software stacks}
%
% \begin{itemize}
% \item
%   (VIS layer)
% \item
%   GenericLibrary
% \item
%   (MiniZinc)
% \end{itemize}
% Another stack
% \begin{itemize}
% \item
%   (VIS layer)
% \item
%   GraphDSL (describe the graph) + ConstraintDSL (still ongoing work)
% \item
%   QPNModeler: encodes the Qualitative Probabilistic Network semantics
% \item
%   haskelzinc: Haskell interface to (and from) MiniZinc
% \item
%   (MiniZinc)
% \end{itemize}

\section{Installation and software requirements}
\label{install-and-reqs}

\input{install}

% ----------------------------------------------------------------

\input{semantics}

\section{Conclusion}

We have designed version 1.0 of a DSL for describing GRACeFUL concept
maps.
%
We have provided a Haskell semantics implementing the DSL and the full
source code is available on github.
%
We have also explored alternative mathematical semantics using
qualitative probabilistic networks and difference equations.

The next actions in work package 4 is
\begin{itemize}
\item implement a middleware for connecting the DSL to the CFP layer,
\item build a testing and verification framework for RATs,
\item assist WP3 in implementing the graphical user interface, and
\item assist WP2 in building up a library of GRACeFUL concept map
  components expressed in the DSL.
\end{itemize}
%
In parallell, the DSL and its implementation will gradually evolve to
express more and more of the requirements extractable from GMB
sessions with stakeholders.



\bibliographystyle{unsrtnat}
\bibliography{d4.2}

\end{document}
