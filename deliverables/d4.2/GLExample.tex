\todo{Say something about more the collection of examples available online: }
The collection of examples is available in the \verb+examples/+ directory of the GitHub repository \href{https://github.com/GRACeFUL-project/GenericLibrary}{GenericLibrary}:

% -- A GCM representing a simluation of the swedish energy system
% energySystem :: GCM ()
% SmallExample.hs

\subsection{Example: Runoff flow}
\label{example-runoff-flow}

We show a small GL program which models a rain runoff area, like a
town square, which has been provided with a pump to alleviate possible
flooding issues (this is a common procedure in countries like the
Netherlands).
%
This example is a small part of a larger model used in the CRUD case
study meant to show how GL can be employed to model concrete problems
in CRUD.


\subsubsection{DSL textual input}
\label{example-runoff-flow-dsl-textual-input}

We omit the definition of the more complicated parts of the example
for brevity.

\todo{The pump and rain components are so close the the examples above
  that it would be good to make them identical and skip them here
  (just refer to the previous subsection).}

\todo{I'm not sure it is a good idea to omit the storage component.}

\todo{The rain component here has no return, but above it has that.}

\begin{verbatim}
data Pump = Pump {inflowP, outflowP :: Port Float}

pump :: Float -> GCM Pump
pump capacity = do
  inPort  <- createPort
  outPort <- createPort
  component $ do
    i <- value inPort
    o <- value outPort
    assert $ i `inRange` (0, lit capacity)
    assert $ i === o
  return $ Pump inPort outPort

rain :: Float -> GCM (Port Float)
rain flow = do
  rainP <- createPort
  set rainP flow

data Storage = Storage {inflowS, outflowS, overflowS :: Port Float}

storage :: Float -> GCM Storage
storage = ... -- The implementation of storage is omitted for brevity

example :: GCM ()
example = do
  p <- pump 5
  s <- storage 4
  r <- rain 10

  link (inflowP p) (outflowS s)
  link (inflowS s) r

  output "Overflow" (overflowS s)
\end{verbatim}

When we run the above program we get the output

\begin{verbatim}
ghci> runGCM example
{"Overflow" : 0}
\end{verbatim}
\todo{More explanation needed!}

\todo{Maybe we should have a more elaborate example which utlises actions?}
